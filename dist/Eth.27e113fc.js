parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"NEy7":[function(require,module,exports) {
"use strict";function e(){let e,r,t=new Promise(function(t,n){e=t,r=n});if(!e||!r)throw"defer() error";return{promise:t,resolve:e,reject:r}}function r(e){let r=[];return e.split("/").forEach(e=>{let t=parseInt(e,10);isNaN(t)||(e.length>1&&"'"===e[e.length-1]&&(t+=2147483648),r.push(t))}),r}function t(e,r){return e.reduce((e,t)=>e.then(()=>r(t)),Promise.resolve())}function n(e,r){return Promise.resolve().then(()=>(function e(t,n,o){return t>=n.length?o:r(n[t],t).then(function(r){return o.push(r),e(t+1,n,o)})})(0,e,[]))}function o(e,r){return Promise.resolve().then(()=>{if(e)return r()})}function s(e,r){return Promise.resolve([]).then(function t(n){return e()?r().then(e=>(n.push(e),t(n))):n})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.defer=e,exports.splitPath=r,exports.eachSeries=t,exports.foreach=n,exports.doIf=o,exports.asyncWhile=s;
},{}],"H0eo":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var t=require("buffer").Buffer;Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./utils"),r=require("@ledgerhq/errors"),n=require("bignumber.js"),o=require("rlp");const i={eth:1,erc20:2,erc721:3,erc20mintable:4,erc721mintable:5};function a(e){return t.from(e.startsWith("0x")?e.slice(2):e,"hex")}function s(t){return t?a(t):null}const h=t=>t&&27264===t.statusCode?new r.EthAppPleaseEnableContractData("Please enable Contract data on the Ethereum app Settings"):t;class l{constructor(t,e="w0w"){this.transport=void 0,this.transport=t,t.decorateAppAPIMethods(this,["getAddress","provideERC20TokenInformation","signTransaction","signPersonalMessage","getAppConfiguration","signEIP712HashedMessage","starkGetPublicKey","starkSignOrder","starkSignOrder_v2","starkSignTransfer","starkSignTransfer_v2","starkProvideQuantum","starkProvideQuantum_v2","starkUnsafeSign","eth2GetPublicKey","eth2SetWithdrawalIndex"],e)}getAddress(r,n,o){let i=(0,e.splitPath)(r),a=t.alloc(1+4*i.length);return a[0]=i.length,i.forEach((t,e)=>{a.writeUInt32BE(t,1+4*e)}),this.transport.send(224,2,n?1:0,o?1:0,a).then(t=>{let e={},r=t[0],n=t[1+r];return e.publicKey=t.slice(1,1+r).toString("hex"),e.address="0x"+t.slice(1+r+1,1+r+1+n).toString("ascii"),o&&(e.chainCode=t.slice(1+r+1+n,1+r+1+n+32).toString("hex")),e})}provideERC20TokenInformation({data:t}){return this.transport.send(224,10,0,0,t).then(()=>!0,t=>{if(t&&27904===t.statusCode)return!1;throw t})}signTransaction(r,n){let i,a=(0,e.splitPath)(r),s=0,l=t.from(n,"hex"),c=[],g=(0,o.decode)(l),p=0,d="";if(g.length>6){let e=(0,o.encode)(g.slice(-3));p=l.length-(e.length-1);const r=g[6],n=t.alloc(4);r.copy(n,4-r.length),d=(2*n.readUInt32BE(0)).toString(16).slice(0,-2)}for(;s!==l.length;){let e=0===s?149-4*a.length:150,r=s+e>l.length?l.length-s:e;0!=p&&s+r==p&&r--;let n=t.alloc(0===s?1+4*a.length+r:r);0===s?(n[0]=a.length,a.forEach((t,e)=>{n.writeUInt32BE(t,1+4*e)}),l.copy(n,1+4*a.length,s,s+r)):l.copy(n,0,s,s+r),c.push(n),s+=r}return(0,e.foreach)(c,(t,e)=>this.transport.send(224,4,0===e?0:128,0,t).then(t=>{i=t})).then(()=>{return{v:d+i.slice(0,1).toString("hex"),r:i.slice(1,33).toString("hex"),s:i.slice(33,65).toString("hex")}},t=>{throw h(t)})}getAppConfiguration(){return this.transport.send(224,6,0,0).then(t=>{let e={};return e.arbitraryDataEnabled=1&t[0],e.erc20ProvisioningNecessary=2&t[0],e.starkEnabled=4&t[0],e.starkv2Supported=8&t[0],e.version=t[1]+"."+t[2]+"."+t[3],e})}signPersonalMessage(r,n){let o,i=(0,e.splitPath)(r),a=0,s=t.from(n,"hex"),h=[];for(;a!==s.length;){let e=0===a?149-4*i.length-4:150,r=a+e>s.length?s.length-a:e,n=t.alloc(0===a?1+4*i.length+4+r:r);0===a?(n[0]=i.length,i.forEach((t,e)=>{n.writeUInt32BE(t,1+4*e)}),n.writeUInt32BE(s.length,1+4*i.length),s.copy(n,1+4*i.length+4,a,a+r)):s.copy(n,0,a,a+r),h.push(n),a+=r}return(0,e.foreach)(h,(t,e)=>this.transport.send(224,8,0===e?0:128,0,t).then(t=>{o=t})).then(()=>{return{v:o[0],r:o.slice(1,33).toString("hex"),s:o.slice(33,65).toString("hex")}})}signEIP712HashedMessage(r,n,o){const i=a(n),s=a(o);let h=(0,e.splitPath)(r),l=t.alloc(1+4*h.length+32+32,0),c=0;return l[0]=h.length,h.forEach((t,e)=>{l.writeUInt32BE(t,1+4*e)}),c=1+4*h.length,i.copy(l,c),c+=32,s.copy(l,c),this.transport.send(224,12,0,0,l).then(t=>{return{v:t[0],r:t.slice(1,33).toString("hex"),s:t.slice(33,65).toString("hex")}})}starkGetPublicKey(r,n){let o=(0,e.splitPath)(r),i=t.alloc(1+4*o.length);return i[0]=o.length,o.forEach((t,e)=>{i.writeUInt32BE(t,1+4*e)}),this.transport.send(240,2,n?1:0,0,i).then(t=>t.slice(0,t.length-2))}starkSignOrder(r,n,o,i,a,h,l,c,g,p,d){const u=s(n),S=s(i);let f=(0,e.splitPath)(r),E=t.alloc(1+4*f.length+20+32+20+32+4+4+8+8+4+4,0),y=0;return E[0]=f.length,f.forEach((t,e)=>{E.writeUInt32BE(t,1+4*e)}),y=1+4*f.length,u&&u.copy(E,y),y+=20,t.from(o.toString(16).padStart(64,"0"),"hex").copy(E,y),y+=32,S&&S.copy(E,y),y+=20,t.from(a.toString(16).padStart(64,"0"),"hex").copy(E,y),y+=32,E.writeUInt32BE(h,y),y+=4,E.writeUInt32BE(l,y),y+=4,t.from(c.toString(16).padStart(16,"0"),"hex").copy(E,y),y+=8,t.from(g.toString(16).padStart(16,"0"),"hex").copy(E,y),y+=8,E.writeUInt32BE(p,y),y+=4,E.writeUInt32BE(d,y),this.transport.send(240,4,1,0,E).then(t=>{return{r:t.slice(1,33).toString("hex"),s:t.slice(33,65).toString("hex")}})}starkSignOrder_v2(r,n,o,a,h,l,c,g,p,d,u,S,f,E,y){const x=s(n),w=s(l);if(!(o in i))throw new Error("eth.starkSignOrderv2 invalid source quantization type="+o);if(!(c in i))throw new Error("eth.starkSignOrderv2 invalid destination quantization type="+c);let I=(0,e.splitPath)(r),m=t.alloc(1+4*I.length+1+20+32+32+1+20+32+32+4+4+8+8+4+4,0),U=0;return m[0]=I.length,I.forEach((t,e)=>{m.writeUInt32BE(t,1+4*e)}),U=1+4*I.length,m[U]=i[o],U++,x&&x.copy(m,U),U+=20,a&&t.from(a.toString(16).padStart(64,"0"),"hex").copy(m,U),U+=32,h&&t.from(h.toString(16).padStart(64,"0"),"hex").copy(m,U),m[U+=32]=i[c],U++,w&&w.copy(m,U),U+=20,g&&t.from(g.toString(16).padStart(64,"0"),"hex").copy(m,U),U+=32,p&&t.from(p.toString(16).padStart(64,"0"),"hex").copy(m,U),U+=32,m.writeUInt32BE(d,U),U+=4,m.writeUInt32BE(u,U),U+=4,t.from(S.toString(16).padStart(16,"0"),"hex").copy(m,U),U+=8,t.from(f.toString(16).padStart(16,"0"),"hex").copy(m,U),U+=8,m.writeUInt32BE(E,U),U+=4,m.writeUInt32BE(y,U),this.transport.send(240,4,3,0,m).then(t=>{return{r:t.slice(1,33).toString("hex"),s:t.slice(33,65).toString("hex")}})}starkSignTransfer(r,n,o,i,h,l,c,g,p){const d=s(n),u=a(i);let S=(0,e.splitPath)(r),f=t.alloc(1+4*S.length+20+32+32+4+4+8+4+4,0),E=0;return f[0]=S.length,S.forEach((t,e)=>{f.writeUInt32BE(t,1+4*e)}),E=1+4*S.length,d&&d.copy(f,E),E+=20,t.from(o.toString(16).padStart(64,"0"),"hex").copy(f,E),E+=32,u.copy(f,E),E+=32,f.writeUInt32BE(h,E),E+=4,f.writeUInt32BE(l,E),E+=4,t.from(c.toString(16).padStart(16,"0"),"hex").copy(f,E),E+=8,f.writeUInt32BE(g,E),E+=4,f.writeUInt32BE(p,E),this.transport.send(240,4,2,0,f).then(t=>{return{r:t.slice(1,33).toString("hex"),s:t.slice(33,65).toString("hex")}})}starkSignTransfer_v2(r,n,o,h,l,c,g,p,d,u,S,f,E){const y=s(n),x=a(c),w=s(f);if(!(o in i))throw new Error("eth.starkSignTransferv2 invalid quantization type="+o);let I=(0,e.splitPath)(r),m=t.alloc(1+4*I.length+1+20+32+32+32+4+4+8+4+4+(w?52:0),0),U=0;return m[0]=I.length,I.forEach((t,e)=>{m.writeUInt32BE(t,1+4*e)}),U=1+4*I.length,m[U]=i[o],U++,y&&y.copy(m,U),U+=20,h&&t.from(h.toString(16).padStart(64,"0"),"hex").copy(m,U),U+=32,l&&t.from(l.toString(16).padStart(64,"0"),"hex").copy(m,U),U+=32,x.copy(m,U),U+=32,m.writeUInt32BE(g,U),U+=4,m.writeUInt32BE(p,U),U+=4,t.from(d.toString(16).padStart(16,"0"),"hex").copy(m,U),U+=8,m.writeUInt32BE(u,U),U+=4,m.writeUInt32BE(S,U),w&&E&&(U+=4,t.from(E.toString(16).padStart(64,"0"),"hex").copy(m,U),U+=32,w.copy(m,U)),this.transport.send(240,4,w?5:4,0,m).then(t=>{return{r:t.slice(1,33).toString("hex"),s:t.slice(33,65).toString("hex")}})}starkProvideQuantum(e,r){const n=s(e);let o=t.alloc(52,0);return n&&n.copy(o,0),t.from(r.toString(16).padStart(64,"0"),"hex").copy(o,20),this.transport.send(240,8,0,0,o).then(()=>!0,t=>{if(t&&27904===t.statusCode)return!1;throw t})}starkProvideQuantum_v2(e,r,n,o){const a=s(e);if(!(r in i))throw new Error("eth.starkProvideQuantumV2 invalid quantization type="+r);let h=t.alloc(84,0),l=0;return a&&a.copy(h,l),l+=20,n&&t.from(n.toString(16).padStart(64,"0"),"hex").copy(h,l),l+=32,o&&t.from(o.toString(16).padStart(64,"0"),"hex").copy(h,l),this.transport.send(240,8,i[r],0,h).then(()=>!0,t=>{if(t&&27904===t.statusCode)return!1;throw t})}starkUnsafeSign(r,n){const o=a(n);let i=(0,e.splitPath)(r),s=t.alloc(1+4*i.length+32),h=0;return s[0]=i.length,i.forEach((t,e)=>{s.writeUInt32BE(t,1+4*e)}),h=1+4*i.length,o.copy(s,h),this.transport.send(240,10,0,0,s).then(t=>{return{r:t.slice(1,33).toString("hex"),s:t.slice(33,65).toString("hex")}})}eth2GetPublicKey(r,n){let o=(0,e.splitPath)(r),i=t.alloc(1+4*o.length);return i[0]=o.length,o.forEach((t,e)=>{i.writeUInt32BE(t,1+4*e)}),this.transport.send(224,14,n?1:0,0,i).then(t=>{let e={};return e.publicKey=t.slice(0,-2).toString("hex"),e})}eth2SetWithdrawalIndex(e){let r=t.alloc(4,0);return r.writeUInt32BE(e,0),this.transport.send(224,16,0,0,r).then(()=>!0,t=>{if(t&&27904===t.statusCode)return!1;throw t})}}exports.default=l;
},{"./utils":"NEy7","@ledgerhq/errors":"l0DP","bignumber.js":"vrSf","rlp":"bL3J","buffer":"peL6"}]},{},[], null)